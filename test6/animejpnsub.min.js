"use strict";function loadSubs(){var e=-1;Object.keys(jlinks[episode].subtitles).forEach(function(t){e++,vjs.addRemoteTextTrack({src:jlinks[episode].subtitles[t],label:t,kind:"captions"});var i=vjs.textTracks()[e];i.mode="showing",i.mode="disabled",$("<div></div>",{id:"pre_"+t,style:"white-space:pre;"}).html("<br>").appendTo($("#subtitles_display")).hide(),$("<label></label>",{"for":"box"+t,style:"display:inline-block"}).append($("<input>",{type:"checkbox",id:"box"+t,style:"margin-left: 25px",value:t}).change(function(){this.checked?$("#pre_"+this.value).show():$("#pre_"+this.value).hide()}),t).appendTo($("#subtitles_controls")),"Japanese"==t&&i.on("loadeddata",function(){$("#box"+this.label).attr("checked",!0),$("#pre_"+this.label).show(),loadCaptions(this.cues)}),i.addEventListener("cuechange",function(){var e=this.activeCues[0],t=document.getElementById("pre_"+this.label);e?(t.innerHTML="",t.appendChild(e.getCueAsHTML())):t.innerHTML="<br>"})})}function loadCaptions(e){for(var t=0;t<e.length;t++){var i=e[t].getCueAsHTML(),n=document.createElement("option");n.text=i.textContent,n.setAttribute("data-time",e[t].startTime),document.getElementById("results").add(n)}}function playCaption(e){var t=e.options[e.options.selectedIndex].getAttribute("data-time");vjs.currentTime(t)}function toggleAdvSub(){$(".advanced_subtitles").toggle()}function getQueryFieldValue(e){for(var t=window.location.search.substring(1).split("&"),i=0;i<t.length;i++){var n=t[i].split("=");if(n[0]==e)return n[1]}return!1}if(getQueryFieldValue("v")&&void 0!==jlinks[getQueryFieldValue("v")]){var episode=getQueryFieldValue("v");document.title=anime_title+" "+jlinks[episode].name+" - Anime Japanese Subtitles",$("#video-title").html(anime_title+" "+jlinks[episode].name),Object.keys(jlinks).forEach(function(e){e==episode?$("#episode-links").append("&nbsp;",jlinks[episode].name,"&nbsp;"):$("#episode-links").append("&nbsp;",$("<a></a>",{href:"?v="+e}).html(jlinks[e].name),"&nbsp;")});var vjs=videojs(document.getElementById("videoPlayer"),{html5:{nativeTextTracks:!1}});vjs.src({type:"video/mp4",src:jlinks[episode].video}),loadSubs(),vjs.ready(function(){this.hotkeys({volumeStep:.1,seekStep:5,alwaysCaptureHotkeys:!0,enableVolumeScroll:!1,enableNumbers:!1,enableModifiersForNumbers:!1,customKeys:{ccKey:{key:function(e){return 67===e.which},handler:function(){for(var e=vjs.textTracks(),t=0;t<e.length;t++){var i=e[t];if("showing"===i.mode){i.mode="disabled",t<e.length-1&&(e[t+1].mode="showing");break}if(t===e.length-1){e[0].mode="showing";break}}}}}}),$("#loading-message").remove(),$("#video-container").show()})}else window.location.href="?v="+Object.keys(jlinks)[0];
